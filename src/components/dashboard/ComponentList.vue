<template>
  <section class="grid lg:grid-cols-3 md:grid-cols-22" v-if="!loading">
    <DashboardComponentCard
      v-for="component in component_list"
      :key="component.id"
      :data="component"
    />
    <article
      class="border border-primary rounded-md w-[300px] h-[450px] shadow-xl p-4 flex flex-col justify-between relative"
    >
      <div class="h-[250px] border-2 rounded-lg mb-5" />
      <div class="flex flex-col gap-1 mb-5">
        <h3 class="font-bold text-xl md:pr-6 pr-12">
          Create your next awesome component
        </h3>
        <span>it's easier than you think</span>
      </div>

      <button class="modal-btn" @click="useCoreModal().openCreateComponent()">
        Create Component
        <Add />
      </button>
    </article>
  </section>
      <section class="grid lg:grid-cols-3 md:grid-cols-2 gap-4" v-else>
        <Skeleton height="200px" radius="0.375rem" v-for="n in 3" :key="n" />
      </section>
</template>

<script setup lang="ts">
import Add from '@/assets/icons/src/add.vue'
import { useCoreModal } from '@/composables/core/modals'
import { useFetchSiteComponents } from '@/composables/sites/components/fetch'

const { fetch, loading, component_list } = useFetchSiteComponents()
const site = useRoute().params.id as string
fetch(site)
</script>

<style scoped>
</style>
